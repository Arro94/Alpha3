<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Alphamated</title>
    <style>
        @import '/stylesheets/style.css';
        @import 'stylesheets/socialMedia.css';
    </style>

</head>
<body>
<div id="app" class="mdl-layout mdl-js-layout mdl-layout--fixed-header">

    <header class="mdl-layout__header mdl-layout__header--waterfall portfolio-header">
        <div class="mdl-layout__header-row portfolio-logo-row">
            <div class="logo-container">
                <div class="logo-area-background">
                    <div class="portfolio-logo"></div>
                </div>
            </div>
        </div>
        <div class="mdl-layout__header-row portfolio-navigation-row mdl-layout--large-screen-only">
            <nav class="mdl-navigation mdl-typography--body-1-force-preferred-font">
                <a href="index.html" class="mdl-navigation__link" onclick="hideMenu()">Home</a>
                <a href="about.html" class="mdl-navigation__link" onclick="hideMenu()">About</a>
                <a href="gallery.html" class="mdl-navigation__link" onclick="hideMenu()">Gallery</a>
                <a href="contact.html" class="mdl-navigation__link" onclick="hideMenu()">Contact</a>

            </nav>
        </div>
    </header>
    <div class="mdl-layout__drawer mdl-layout--small-screen-only">
        <span class="mdl-layout__title">Alphamated</span>
        <nav class="mdl-navigation mdl-typography--body-1-force-preferred-font">
            <a href="index.html" class="mdl-navigation__link" onclick="hideMenu()">Home</a>
            <a href="about.html" class="mdl-navigation__link" onclick="hideMenu()">About</a>
            <a href="gallery.html" class="mdl-navigation__link" onclick="hideMenu()">Gallery</a>
            <a href="contact.html" class="mdl-navigation__link" onclick="hideMenu()">Contact</a>

        </nav>
    </div>

    <main class="mdl-layout__content main">
        <div class="mdl-grid portfolio-max-width">
            <div class="mdl-cell mdl-cell--12-col mdl-card mdl-shadow--4dp">
                <div class="mdl-card__media">
                </div>

                <div class="mdl-grid portfolio-copy">

                    <!--todo -->

                    <div class="mdl-card__title">
                        <h2 class="mdl-card__title-text">Contact Information</h2>
                    </div>
                    <div class="mdl-cell mdl-cell--6-col">
                    </div>
                    <div class="mdl-cell mdl-cell--6-col mdl-card__supporting-text no-padding">
                        <img src="/images/EvanDuignan.jpg" width="186px" height="420px">
                    </div>
                    <div class="mdl-cell mdl-cell--6-col mdl-card__supporting-text no-padding ">
                        <p>
                            Evan Duignan - CEO<br>
                            Contact@alphamatedllc.com<br>
                            (440)382-4915<br>
                        </p>

                    </div>


                    <!--todo -->

                    <div class="mdl-cell mdl-cell--12-col">

                        <!--<div class="mdl-layout-spacer"></div>-->

                        <div class="mdl-card mdl-shadow--2dp my-subscribe-card-size">
                            <form name="subForm" id="subscriptionForm" method="POST" action="/api/emailList/add"
                                  autocomplete="off">
                                <!--todo add code so you dont hard code address above. let env handle-->
                                <div class="mdl-card__title mdl-color--primary">
                                    <h2 class="mdl-card__title-text mdl-color-text--white">Subscribe for updates:</h2>
                                </div>
                                <img src="/images/under-construction.jpg">
                                <div class="mdl-card__supporting-text">
                                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                        <label for="email" class="mdl-textfield__label">Email Address:</label>
                                        <input disabled name="txtEmail" oninput="checkEmailValidator()" id="email"
                                               class="mdl-textfield__input"
                                               type="email">
                                        <span class="mdl-textfield__error">Please enter a valid email address.</span>
                                    </div>
                                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                        <label for="name" class="mdl-textfield__label">Name:</label>
                                        <input disabled name="txtName" id="name" class="mdl-textfield__input"
                                               type="text">
                                    </div>

                                </div>
                                <div class="mdl-card__actions mdl-card--border">
                                    <button disabled type="submit" name="subButt"
                                            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                                        Submit
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="mdl-cell mdl-cell--12-col">
                        <a href="https://www.linkedin.com/in/evan-duignan-125975b6/" class="fa fa-linkedin" target="_blank"></a>
                        <a href="https://www.instagram.com/alphamated/" class="fa fa-instagram" target="_blank"></a>
                        <a href="https://www.facebook.com/Alphamated/" class="fa fa-facebook" target="_blank"></a>
                    </div>
                </div>
            </div>

            <div class="mdl-layout-spacer"></div>
        </div>
        <footer class="mdl-mini-footer">
            <div class="mdl-mini-footer__left-section">
                <div class="mdl-logo">Alphamated</div>
            </div>
            <div class="mdl-mini-footer__right-section">
                <ul class="mdl-mini-footer__link-list">
                    <li><a href="#">Help</a></li>
                    <li><a href="#">Privacy & Terms</a></li>
                </ul>
            </div>
        </footer>
    </main>
</div>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-blue.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script>

    function hideMenu() {
        document.getElementsByClassName('mdl-layout__drawer')[0].classList.remove('is-visible');
        document.getElementsByClassName('mdl-layout__obfuscator')[0].classList.remove('is-visible');
    }

    // function submit(email,name) {
    //     // handle email subscription
    //     var Url = "http://localhost:3000/emailList/add";
    //     var xhr = new XMLHttpRequest();
    //
    //     xhr.open('POST', Url, true);
    //     xhr.
    //     xhr.send(email,name);
    //     xhr.onreadystatechange = processRequest;
    //     function processRequest(e) {
    //         if (xhr.readyState == 4 && xhr.status == 200) {
    //             var response1 = JSON.parse(xhr.responseText);
    //             document.getElementById("origin").innerHTML = response1.origin;
    //             document.getElementById("url").innerHTML = response1.url;
    //         }
    //     }
    // }
    var submitButtonDisabled = true;

    // function submitSubscription() {
    //     if(submitButtonDisabled = false) {
    //         let email = document.forms["subForm"]["txtEmail"].value.trim();
    //         let name = document.forms["subForm"]["txtName"].value.trim();
    //         // this.isLoading = true;
    //         submitButtonDisabled = true;
    //         document.getElementsByName("subButt").disabled=submitButtonDisabled;
    //         submit(email,name);
    //     }
    // }

    function checkEmailValidator() {
        document.getElementsByName("subButt").item(0).removeAttribute('disabled');
        let btn = document.getElementsByName("subButt").item(0);
        if (email.checkValidity() && email.value.trim().length !== 0) {
            console.log("valid");
            submitButtonDisabled = false;
        } else {
            console.log("invalid");
            submitButtonDisabled = true;
        }
        if (submitButtonDisabled) btn.setAttribute('disabled', 'true');
        else btn.removeAttribute('disabled');
    }


    const form = document.getElementById("subscriptionForm");


    if (form.addEventListener) {
        form.addEventListener("submit", function (event) {
            event.preventDefault();
            const xh = new XMLHttpRequest();
            xh.onreadystatechange = function () {
                if (xh.readyState == 4 && xh.status == 200) {
                    console.log("bitchin");
                }
            };
            xh.open("POST", "/api/emailList/add", true);
            xh.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xh.send(JSON.stringify({
                email: form.email.value,
                name: form.name.value
            }));
        });
    } else if (form.attachEvent) {
        form.attachEvent('onsubmit', function (event) {
            event.preventDefault();
            const xh = new XMLHttpRequest();
            xh.onreadystatechange = function () {
                if (xh.readyState == 4 && xh.status == 200) {
                    console.log("bitchin");
                }
            };
            xh.open("POST", "/api/emailList/add", true);
            xh.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xh.send(JSON.stringify({
                email: form.email.value,
                name: form.name.value
            }));
        });
    }
</script>
</body>
</html>
